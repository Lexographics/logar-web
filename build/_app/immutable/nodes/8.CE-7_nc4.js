import"../chunks/CWj6FrbW.js";import{p as ue,a4 as b,y as de,o as pe,a as be,a5 as o,a6 as c,g as e,z as t,a8 as n,a7 as X,f as Y,a9 as _e}from"../chunks/vtVjXRxL.js";import{d as fe,s as D}from"../chunks/DtjsYg9O.js";import{i as P}from"../chunks/CXzoa0Vj.js";import{c as ye,g as U,r as A,e as me,a as xe}from"../chunks/Bdv8_l-1.js";import{f as h,a as x}from"../chunks/BKrJ63KQ.js";import{b as q,a as he}from"../chunks/B1SoyIIh.js";import{a as F}from"../chunks/BP3o4HH5.js";import{B as ge}from"../chunks/Bs-ooyg2.js";class ke{constructor(){this.axios=ye()}async getGlobals(){try{return[(await this.axios.get(`${F()}/globals`,{headers:{...U()}})).data.data,null]}catch(l){return[null,l]}}async updateGlobal(l,a,u){try{return[(await this.axios.put(`${F()}/globals?key=${l}`,{value:a,exported:u},{headers:{...U()}})).data.data,null]}catch(s){return[null,s]}}async deleteGlobal(l){try{return await this.axios.delete(`${F()}/globals?key=${l}`,{headers:{...U()}}),null}catch(a){return a}}}const I=new ke;var Ge=h('<div class="error-message svelte-19cb114"> </div>'),we=h('<div class="loading svelte-19cb114">Loading...</div>'),Ke=(g,l,a)=>l(e(a).Key),Ee=(g,l,a,u)=>{t(l,null),t(a,""),t(u,!1)},Ve=h('<input type="text" class="input svelte-19cb114"/> <label class="export-label svelte-19cb114"><input type="checkbox" class="svelte-19cb114"/> Exported</label> <button class="save-button svelte-19cb114">Save</button> <button class="cancel-button svelte-19cb114">Cancel</button>',1),Se=(g,l,a,u,s)=>{t(l,e(a).Key,!0),t(u,e(a).Value,!0),t(s,e(a).Exported,!0)},$e=(g,l,a)=>l(e(a).Key),Ne=h('<div class="content svelte-19cb114"><span class="key svelte-19cb114"> </span> <span class="value svelte-19cb114"> </span> <div class="export-status svelte-19cb114"><span class="export-label svelte-19cb114"><input type="checkbox" disabled class="svelte-19cb114"/> </span></div></div> <div class="action-buttons svelte-19cb114"><button class="edit-button svelte-19cb114">Edit</button> <button class="delete-button svelte-19cb114">Delete</button></div>',1),Ae=h('<div class="item svelte-19cb114"><!></div>'),Je=h('<div class="globals svelte-19cb114"></div>'),Oe=h('<div class="page svelte-19cb114"><h1 class="svelte-19cb114">Global Variables</h1> <!> <div class="add-form svelte-19cb114"><input type="text" placeholder="Key" class="input svelte-19cb114"/> <input type="text" placeholder="Value" class="input svelte-19cb114"/> <button class="add-button svelte-19cb114">Add Global</button></div> <!></div>');function Pe(g,l){ue(l,!0);let a=b(de([])),u=b(!0),s=b(null),k=b(""),G=b(""),J=b(null),_=b(""),w=b(!1);async function j(){t(u,!0),t(s,null);const[i,v]=await I.getGlobals();v?t(s,v.message,!0):t(a,i,!0),t(u,!1)}async function Z(){if(!e(k)||!e(G))return;let i;try{i=JSON.parse(e(G))}catch{t(s,"Invalid JSON");return}t(s,null);const[v,f]=await I.updateGlobal(e(k),i,!1);f?t(s,f.message,!0):(e(a).push({Key:e(k),Value:e(G),Exported:!1}),t(k,""),t(G,""))}async function ee(i){if(!e(_))return;let v;try{v=JSON.parse(e(_))}catch{t(s,"Invalid JSON");return}t(s,null);const[f,K]=await I.updateGlobal(i,v,e(w));K?t(s,K.message,!0):(await j(),t(J,null),t(_,""),t(w,!1))}async function te(i){t(s,null);const v=await I.deleteGlobal(i);v?t(s,v.message,!0):await j()}pe(()=>{j()}),ge(g,{children:(i,v)=>{var f=Oe(),K=o(c(f),2);{var Q=r=>{var d=Ge(),$=c(d,!0);n(d),X(()=>D($,e(s))),x(r,d)};P(K,r=>{e(s)&&r(Q)})}var B=o(K,2),z=c(B);A(z);var C=o(z,2);A(C);var ae=o(C,2);ae.__click=Z,n(B);var se=o(B,2);{var le=r=>{var d=we();x(r,d)},re=r=>{var d=Je();me(d,21,()=>e(a),$=>$.Key,($,p)=>{var H=Ae(),oe=c(H);{var ne=E=>{var N=Ve(),y=Y(N);A(y);var m=o(y,2),O=c(m);A(O),_e(),n(m);var V=o(m,2);V.__click=[Ke,ee,p];var L=o(V,2);L.__click=[Ee,J,_,w],q(y,()=>e(_),S=>t(_,S)),he(O,()=>e(w),S=>t(w,S)),x(E,N)},ce=E=>{var N=Ne(),y=Y(N),m=c(y),O=c(m,!0);n(m);var V=o(m,2),L=c(V,!0);n(V);var S=o(V,2),R=c(S),M=c(R);A(M);var ie=o(M);n(R),n(S),n(y);var T=o(y,2),W=c(T);W.__click=[Se,J,p,_,w];var ve=o(W,2);ve.__click=[$e,te,p],n(T),X(()=>{D(O,e(p).Key),D(L,e(p).Value),xe(M,e(p).Exported),D(ie,` ${e(p).Exported?"Exported":"Not Exported"}`)}),x(E,N)};P(oe,E=>{e(J)===e(p).Key?E(ne):E(ce,!1)})}n(H),x($,H)}),n(d),x(r,d)};P(se,r=>{e(u)?r(le):r(re,!1)})}n(f),q(z,()=>e(k),r=>t(k,r)),q(C,()=>e(G),r=>t(G,r)),x(i,f)},$$slots:{default:!0}}),be()}fe(["click"]);export{Pe as component};
