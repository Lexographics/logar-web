import"../chunks/CWj6FrbW.js";import{p as ot,a1 as h,w as nt,o as it,a as vt,a2 as n,a3 as d,g as t,x as e,a5 as u,a4 as F,f as Q}from"../chunks/Ddypn_Vl.js";import{d as ut,s as C}from"../chunks/BrL2UJ6-.js";import{i as E}from"../chunks/DFXQ8BUi.js";import{c as ct,g as H,r as L,e as dt,i as _t}from"../chunks/BHZMxQwG.js";import{t as m,a as b}from"../chunks/BVINg2-B.js";import{b as M}from"../chunks/B9uo1nGO.js";import{a as P}from"../chunks/MmAr2Ipg.js";import{B as pt}from"../chunks/Dq-DC7LE.js";class ft{constructor(){this.axios=ct()}async getGlobals(){try{return[(await this.axios.get(`${P()}/globals`,{headers:{...H()}})).data.data,null]}catch(a){return[null,a]}}async updateGlobal(a,l){try{return[(await this.axios.put(`${P()}/globals?key=${a}`,l,{headers:{...H()}})).data.data,null]}catch(c){return[null,c]}}async deleteGlobal(a){try{return await this.axios.delete(`${P()}/globals?key=${a}`,{headers:{...H()}}),null}catch(l){return l}}}const A=new ft;var ht=m('<div class="error-message svelte-1l4hft"> </div>'),bt=m('<div class="loading svelte-1l4hft">Loading...</div>'),mt=(y,a,l)=>a(t(l).Key),yt=(y,a)=>e(a,null),gt=m('<input type="text" class="input svelte-1l4hft"> <button class="save-button svelte-1l4hft">Save</button> <button class="cancel-button svelte-1l4hft">Cancel</button>',1),xt=(y,a,l,c)=>{e(a,t(l).Key,!0),e(c,t(l).Value,!0)},kt=(y,a,l)=>a(t(l).Key),wt=m('<div class="content svelte-1l4hft"><span class="key svelte-1l4hft"> </span> <span class="value svelte-1l4hft"> </span></div> <div class="action-buttons svelte-1l4hft"><button class="edit-button svelte-1l4hft">Edit</button> <button class="delete-button svelte-1l4hft">Delete</button></div>',1),Gt=m('<div class="item svelte-1l4hft"><!></div>'),Kt=m('<div class="globals svelte-1l4hft"></div>'),Vt=m('<div class="page svelte-1l4hft"><h1 class="svelte-1l4hft">Global Variables</h1> <!> <div class="add-form svelte-1l4hft"><input type="text" placeholder="Key" class="input svelte-1l4hft"> <input type="text" placeholder="Value" class="input svelte-1l4hft"> <button class="add-button svelte-1l4hft">Add Global</button></div> <!></div>');function Bt(y,a){ot(a,!0);let l=h(nt([])),c=h(!0),r=h(null),g=h(""),_=h(""),S=h(null),x=h("");async function J(){e(c,!0),e(r,null);const[i,o]=await A.getGlobals();o?e(r,o.message,!0):e(l,i,!0),e(c,!1)}async function R(){if(!t(g)||!t(_))return;let i;try{i=JSON.parse(t(_))}catch{e(r,"Invalid JSON");return}e(r,null);const[o,p]=await A.updateGlobal(t(g),t(_));p?e(r,p.message,!0):(t(l).push({Key:t(g),Value:t(_)}),e(g,""),e(_,""))}async function T(i){if(!t(x))return;let o;try{o=JSON.parse(t(x))}catch{e(r,"Invalid JSON");return}e(r,null);const[p,k]=await A.updateGlobal(i,o);k?e(r,k.message,!0):(await J(),e(S,null),e(x,""))}async function W(i){e(r,null);const o=await A.deleteGlobal(i);o?e(r,o.message,!0):await J()}it(()=>{J()}),pt(y,{children:(i,o)=>{var p=Vt(),k=n(d(p),2);{var U=s=>{var v=ht(),I=d(v,!0);u(v),F(()=>C(I,t(r))),b(s,v)};E(k,s=>{t(r)&&s(U)})}var N=n(k,2),O=d(N);L(O);var D=n(O,2);L(D);var X=n(D,2);X.__click=R,u(N);var Y=n(N,2);{var Z=s=>{var v=bt();b(s,v)},tt=s=>{var v=Kt();dt(v,21,()=>t(l),_t,(I,w)=>{var j=Gt(),et=d(j);{var at=G=>{var V=gt(),f=Q(V);L(f);var K=n(f,2);K.__click=[mt,T,w];var B=n(K,2);B.__click=[yt,S],M(f,()=>t(x),$=>e(x,$)),b(G,V)},lt=G=>{var V=wt(),f=Q(V),K=d(f),B=d(K,!0);u(K);var $=n(K,2),st=d($,!0);u($),u(f);var q=n(f,2),z=d(q);z.__click=[xt,S,w,x];var rt=n(z,2);rt.__click=[kt,W,w],u(q),F(()=>{C(B,t(w).Key),C(st,t(w).Value)}),b(G,V)};E(et,G=>{t(S)===t(w).Key?G(at):G(lt,!1)})}u(j),b(I,j)}),u(v),b(s,v)};E(Y,s=>{t(c)?s(Z):s(tt,!1)})}u(p),M(O,()=>t(g),s=>e(g,s)),M(D,()=>t(_),s=>e(_,s)),b(i,p)},$$slots:{default:!0}}),vt()}ut(["click"]);export{Bt as component};
