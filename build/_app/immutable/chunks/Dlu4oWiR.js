import{a7 as oe,F as ue,au as j,T as b,K as w,a8 as le,N as fe,g as V,t as ce,Q as de,R as Y,U as H,M as k,ao as ve,V as ee,H as re,W as pe,av as R,ar as ae,q as _e,aa as z,aw as L,ax as G,ay as U,y as he,az as K,ak as ge,aA as me,aB as xe,ag as we,aC as ye,J as Ae,aD as Ee,am as Se,aE as Te,aF as Ie,aG as Ne,aH as ke,aI as De}from"./C_K9WeA7.js";import{a as Me}from"./DUF1MtVn.js";import{u as se,g as Ce,a as S}from"./Xh6yIWb-.js";import{g as be}from"./CnJtoUTT.js";import{c as He}from"./Nv5XlIL8.js";function We(r,e){return e}function Re(r,e,a,s){for(var n=[],i=e.length,o=0;o<i;o++)xe(e[o].e,n,!0);var d=i>0&&n.length===0&&a!==null;if(d){var m=a.parentNode;we(m),m.append(a),s.clear(),E(r,e[0].prev,e[i-1].next)}ye(n,()=>{for(var _=0;_<i;_++){var v=e[_];d||(s.delete(v.k),E(r,v.prev,v.next)),Ae(v.e,!d)}})}function Xe(r,e,a,s,n,i=null){var o=r,d={flags:e,items:new Map,first:null},m=(e&j)!==0;if(m){var _=r;o=w?b(le(_)):_.appendChild(oe())}w&&fe();var v=null,T=!1,l=ce(()=>{var c=a();return ge(c)?c:c==null?[]:ae(c)});ue(()=>{var c=V(l),t=c.length;if(T&&t===0)return;T=t===0;let y=!1;if(w){var h=o.data===de;h!==(t===0)&&(o=Y(),b(o),H(!1),y=!0)}if(w){for(var g=null,x,p=0;p<t;p++){if(k.nodeType===8&&k.data===ve){o=k,y=!0,H(!1);break}var u=c[p],f=s(u,p);x=ne(k,d,g,null,u,f,p,n,e,a),d.items.set(f,x),g=x}t>0&&b(Y())}w||Le(c,d,o,n,e,s,a),i!==null&&(t===0?v?ee(v):v=re(()=>i(o)):v!==null&&pe(v,()=>{v=null})),y&&H(!0),V(l)}),w&&(o=k)}function Le(r,e,a,s,n,i,o){var O,F,B,q;var d=(n&me)!==0,m=(n&(L|U))!==0,_=r.length,v=e.items,T=e.first,l=T,c,t=null,y,h=[],g=[],x,p,u,f;if(d)for(f=0;f<_;f+=1)x=r[f],p=i(x,f),u=v.get(p),u!==void 0&&((O=u.a)==null||O.measure(),(y??(y=new Set)).add(u));for(f=0;f<_;f+=1){if(x=r[f],p=i(x,f),u=v.get(p),u===void 0){var te=l?l.e.nodes_start:a;t=ne(te,e,t,t===null?e.first:t.next,x,p,f,s,n,o),v.set(p,t),h=[],g=[],l=t.next;continue}if(m&&Ue(u,x,f,n),(u.e.f&R)!==0&&(ee(u.e),d&&((F=u.a)==null||F.unfix(),(y??(y=new Set)).delete(u))),u!==l){if(c!==void 0&&c.has(u)){if(h.length<g.length){var D=g[0],A;t=D.prev;var $=h[0],M=h[h.length-1];for(A=0;A<h.length;A+=1)J(h[A],D,a);for(A=0;A<g.length;A+=1)c.delete(g[A]);E(e,$.prev,M.next),E(e,t,$),E(e,M,D),l=D,t=M,f-=1,h=[],g=[]}else c.delete(u),J(u,l,a),E(e,u.prev,u.next),E(e,u,t===null?e.first:t.next),E(e,t,u),t=u;continue}for(h=[],g=[];l!==null&&l.k!==p;)(l.e.f&R)===0&&(c??(c=new Set)).add(l),g.push(l),l=l.next;if(l===null)continue;u=l}h.push(u),t=u,l=u.next}if(l!==null||c!==void 0){for(var N=c===void 0?[]:ae(c);l!==null;)(l.e.f&R)===0&&N.push(l),l=l.next;var C=N.length;if(C>0){var ie=(n&j)!==0&&_===0?a:null;if(d){for(f=0;f<C;f+=1)(B=N[f].a)==null||B.measure();for(f=0;f<C;f+=1)(q=N[f].a)==null||q.fix()}Re(e,N,ie,v)}}d&&_e(()=>{var P;if(y!==void 0)for(u of y)(P=u.a)==null||P.apply()}),z.first=e.first&&e.first.e,z.last=t&&t.e}function Ue(r,e,a,s){(s&L)!==0&&G(r.v,e),(s&U)!==0?G(r.i,a):r.i=a}function ne(r,e,a,s,n,i,o,d,m,_){var v=(m&L)!==0,T=(m&Ee)===0,l=v?T?he(n):K(n):n,c=(m&U)===0?o:K(o),t={i:c,v:l,k:i,a:null,e:null,prev:a,next:s};try{return t.e=re(()=>d(r,l,c,_),w),t.e.prev=a&&a.e,t.e.next=s&&s.e,a===null?e.first=t:(a.next=t,a.e.next=t.e),s!==null&&(s.prev=t,s.e.prev=t.e),t}finally{}}function J(r,e,a){for(var s=r.next?r.next.e.nodes_start:a,n=e?e.e.nodes_start:a,i=r.e.nodes_start;i!==s;){var o=Se(i);n.before(i),i=o}}function E(r,e,a){e===null?r.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}const Q=[...` 	
\r\fÂ \v\uFEFF`];function Ze(r,e,a){var s=r==null?"":""+r;if(e&&(s=s?s+" "+e:e),a){for(var n in a)if(a[n])s=s?s+" "+n:n;else if(s.length)for(var i=n.length,o=0;(o=s.indexOf(n,o))>=0;){var d=o+i;(o===0||Q.includes(s[o-1]))&&(d===s.length||Q.includes(s[d]))?s=(o===0?"":s.substring(0,o))+s.substring(d+1):o=d}}return s===""?null:s}function je(r,e){return r==null?null:String(r)}const $e=Symbol("is custom element"),Oe=Symbol("is html");function er(r){if(w){var e=!1,a=()=>{if(!e){if(e=!0,r.hasAttribute("value")){var s=r.value;W(r,"value",null),r.value=s}if(r.hasAttribute("checked")){var n=r.checked;W(r,"checked",null),r.checked=n}}};r.__on_r=a,Te(a),Me()}}function W(r,e,a,s){var n=Fe(r);w&&(n[e]=r.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&r.nodeName==="LINK")||n[e]!==(n[e]=a)&&(e==="loading"&&(r[Ie]=a),a==null?r.removeAttribute(e):typeof a!="string"&&Be(r).includes(e)?r[e]=a:r.setAttribute(e,a))}function Fe(r){return r.__attributes??(r.__attributes={[$e]:r.nodeName.includes("-"),[Oe]:r.namespaceURI===Ne})}var X=new Map;function Be(r){var e=X.get(r.nodeName);if(e)return e;X.set(r.nodeName,e=[]);for(var a,s=r,n=Element.prototype;n!==s;){a=De(s);for(var i in a)a[i].set&&e.push(i);s=ke(s)}return e}function qe(r){Toastify({text:r,duration:5e3,gravity:"top",close:!0,position:"center",style:{background:"var(--card-background)",color:"var(--text-color)",padding:"1rem 0rem",paddingLeft:"2rem",paddingRight:"1rem",borderRadius:"0.5rem",boxShadow:"0 0.5rem 1rem rgba(0, 0, 0, 0.1)",border:"3px solid var(--border-color)",display:"flex",gap:"4rem"}}).showToast()}const Pe={SessionExpired:1001};async function Z(r){r.data.status_code===Pe.SessionExpired&&(se.current={token:null},qe("Session expired, please login again"),be(`${Ce()}/login`))}function Ve(){const r=He.create({});return r.interceptors.response.use(e=>(Z(e),e),e=>(Z(e.response),Promise.reject(e))),r}function I(){return{Authorization:`Bearer ${se.current.token}`}}class Ye{constructor(){this.axios=Ve()}async login(e,a){try{const s=new FormData;return s.append("username",e),s.append("password",a),[(await this.axios.post(`${S()}/auth/login`,s)).data.data,null]}catch(s){return[null,s]}}async logout(){try{return await this.axios.post(`${S()}/auth/logout`,null,{headers:{...I()}}),null}catch(e){return e}}async revokeSession(e){try{const a=new FormData;return a.append("session_id",e.toString()),await this.axios.post(`${S()}/auth/revoke-session`,a,{headers:{...I()}}),null}catch(a){return a}}async getActiveSessions(){try{return[(await this.axios.get(`${S()}/auth/sessions`,{headers:{...I()}})).data.data,null]}catch(e){return[null,e]}}async updateUser(e){try{const a=new FormData;return a.append("display_name",e),[(await this.axios.put(`${S()}/user`,a,{headers:{...I()}})).data.data,null]}catch(a){return[null,a]}}async getAllUsers(){try{return[(await this.axios.get(`${S()}/user`,{headers:{...I()}})).data.data,null]}catch(e){return[null,e]}}async createUser(e,a,s,n){try{const i=new FormData;return i.append("username",e),i.append("password",a),i.append("display_name",s),i.append("is_admin",n.toString()),[(await this.axios.post(`${S()}/user`,i,{headers:{...I()}})).data.data,null]}catch(i){return[null,i]}}}const rr=new Ye;export{Ze as a,Ve as c,Xe as e,I as g,We as i,er as r,W as s,je as t,rr as u};
