import{a7 as ue,F as le,au as j,T as C,K as x,a8 as fe,N as ce,g as V,t as de,Q as ve,R as Y,U as H,M as b,ao as pe,V as ee,H as re,W as he,av as R,ar as ae,q as _e,aa as z,aw as L,ax as G,ay as $,y as ge,az as K,ak as me,aA as ye,aB as xe,ag as we,aC as Ae,J as Ee,aD as Se,am as Te,aE as Ie,aF as Ne,aG as be,aH as ke,aI as De}from"./Ddypn_Vl.js";import{a as Me}from"./BrL2UJ6-.js";import{u as se,g as Ce,a as S}from"./MmAr2Ipg.js";import{g as He}from"./DodE48jg.js";import{c as Re}from"./BjWez0Tu.js";function Ze(r,e){return e}function Le(r,e,a,s){for(var n=[],i=e.length,o=0;o<i;o++)xe(e[o].e,n,!0);var d=i>0&&n.length===0&&a!==null;if(d){var m=a.parentNode;we(m),m.append(a),s.clear(),E(r,e[0].prev,e[i-1].next)}Ae(n,()=>{for(var h=0;h<i;h++){var v=e[h];d||(s.delete(v.k),E(r,v.prev,v.next)),Ee(v.e,!d)}})}function je(r,e,a,s,n,i=null){var o=r,d={flags:e,items:new Map,first:null},m=(e&j)!==0;if(m){var h=r;o=x?C(fe(h)):h.appendChild(ue())}x&&ce();var v=null,T=!1,l=de(()=>{var c=a();return me(c)?c:c==null?[]:ae(c)});le(()=>{var c=V(l),t=c.length;if(T&&t===0)return;T=t===0;let w=!1;if(x){var _=o.data===ve;_!==(t===0)&&(o=Y(),C(o),H(!1),w=!0)}if(x){for(var g=null,y,p=0;p<t;p++){if(b.nodeType===8&&b.data===pe){o=b,w=!0,H(!1);break}var u=c[p],f=s(u,p);y=ne(b,d,g,null,u,f,p,n,e,a),d.items.set(f,y),g=y}t>0&&C(Y())}x||$e(c,d,o,n,e,s,a),i!==null&&(t===0?v?ee(v):v=re(()=>i(o)):v!==null&&he(v,()=>{v=null})),w&&H(!0),V(l)}),x&&(o=b)}function $e(r,e,a,s,n,i,o){var O,F,B,q;var d=(n&ye)!==0,m=(n&(L|$))!==0,h=r.length,v=e.items,T=e.first,l=T,c,t=null,w,_=[],g=[],y,p,u,f;if(d)for(f=0;f<h;f+=1)y=r[f],p=i(y,f),u=v.get(p),u!==void 0&&((O=u.a)==null||O.measure(),(w??(w=new Set)).add(u));for(f=0;f<h;f+=1){if(y=r[f],p=i(y,f),u=v.get(p),u===void 0){var ie=l?l.e.nodes_start:a;t=ne(ie,e,t,t===null?e.first:t.next,y,p,f,s,n,o),v.set(p,t),_=[],g=[],l=t.next;continue}if(m&&Ue(u,y,f,n),(u.e.f&R)!==0&&(ee(u.e),d&&((F=u.a)==null||F.unfix(),(w??(w=new Set)).delete(u))),u!==l){if(c!==void 0&&c.has(u)){if(_.length<g.length){var k=g[0],A;t=k.prev;var U=_[0],D=_[_.length-1];for(A=0;A<_.length;A+=1)J(_[A],k,a);for(A=0;A<g.length;A+=1)c.delete(g[A]);E(e,U.prev,D.next),E(e,t,U),E(e,D,k),l=k,t=D,f-=1,_=[],g=[]}else c.delete(u),J(u,l,a),E(e,u.prev,u.next),E(e,u,t===null?e.first:t.next),E(e,t,u),t=u;continue}for(_=[],g=[];l!==null&&l.k!==p;)(l.e.f&R)===0&&(c??(c=new Set)).add(l),g.push(l),l=l.next;if(l===null)continue;u=l}_.push(u),t=u,l=u.next}if(l!==null||c!==void 0){for(var N=c===void 0?[]:ae(c);l!==null;)(l.e.f&R)===0&&N.push(l),l=l.next;var M=N.length;if(M>0){var oe=(n&j)!==0&&h===0?a:null;if(d){for(f=0;f<M;f+=1)(B=N[f].a)==null||B.measure();for(f=0;f<M;f+=1)(q=N[f].a)==null||q.fix()}Le(e,N,oe,v)}}d&&_e(()=>{var P;if(w!==void 0)for(u of w)(P=u.a)==null||P.apply()}),z.first=e.first&&e.first.e,z.last=t&&t.e}function Ue(r,e,a,s){(s&L)!==0&&G(r.v,e),(s&$)!==0?G(r.i,a):r.i=a}function ne(r,e,a,s,n,i,o,d,m,h){var v=(m&L)!==0,T=(m&Se)===0,l=v?T?ge(n):K(n):n,c=(m&$)===0?o:K(o),t={i:c,v:l,k:i,a:null,e:null,prev:a,next:s};try{return t.e=re(()=>d(r,l,c,h),x),t.e.prev=a&&a.e,t.e.next=s&&s.e,a===null?e.first=t:(a.next=t,a.e.next=t.e),s!==null&&(s.prev=t,s.e.prev=t.e),t}finally{}}function J(r,e,a){for(var s=r.next?r.next.e.nodes_start:a,n=e?e.e.nodes_start:a,i=r.e.nodes_start;i!==s;){var o=Te(i);n.before(i),i=o}}function E(r,e,a){e===null?r.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function te(r){var e,a,s="";if(typeof r=="string"||typeof r=="number")s+=r;else if(typeof r=="object")if(Array.isArray(r)){var n=r.length;for(e=0;e<n;e++)r[e]&&(a=te(r[e]))&&(s&&(s+=" "),s+=a)}else for(a in r)r[a]&&(s&&(s+=" "),s+=a);return s}function Oe(){for(var r,e,a=0,s="",n=arguments.length;a<n;a++)(r=arguments[a])&&(e=te(r))&&(s&&(s+=" "),s+=e);return s}function er(r){return typeof r=="object"?Oe(r):r??""}const Q=[...` 	
\r\fÂ \v\uFEFF`];function rr(r,e,a){var s=r==null?"":""+r;if(e&&(s=s?s+" "+e:e),a){for(var n in a)if(a[n])s=s?s+" "+n:n;else if(s.length)for(var i=n.length,o=0;(o=s.indexOf(n,o))>=0;){var d=o+i;(o===0||Q.includes(s[o-1]))&&(d===s.length||Q.includes(s[d]))?s=(o===0?"":s.substring(0,o))+s.substring(d+1):o=d}}return s===""?null:s}function ar(r,e){return r==null?null:String(r)}const Fe=Symbol("is custom element"),Be=Symbol("is html");function sr(r){if(x){var e=!1,a=()=>{if(!e){if(e=!0,r.hasAttribute("value")){var s=r.value;W(r,"value",null),r.value=s}if(r.hasAttribute("checked")){var n=r.checked;W(r,"checked",null),r.checked=n}}};r.__on_r=a,Ie(a),Me()}}function W(r,e,a,s){var n=qe(r);x&&(n[e]=r.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&r.nodeName==="LINK")||n[e]!==(n[e]=a)&&(e==="loading"&&(r[Ne]=a),a==null?r.removeAttribute(e):typeof a!="string"&&Pe(r).includes(e)?r[e]=a:r.setAttribute(e,a))}function qe(r){return r.__attributes??(r.__attributes={[Fe]:r.nodeName.includes("-"),[Be]:r.namespaceURI===be})}var X=new Map;function Pe(r){var e=X.get(r.nodeName);if(e)return e;X.set(r.nodeName,e=[]);for(var a,s=r,n=Element.prototype;n!==s;){a=De(s);for(var i in a)a[i].set&&e.push(i);s=ke(s)}return e}function Ve(r){Toastify({text:r,duration:5e3,gravity:"top",close:!0,position:"center",style:{background:"var(--card-background)",color:"var(--text-color)",padding:"1rem 0rem",paddingLeft:"2rem",paddingRight:"1rem",borderRadius:"0.5rem",boxShadow:"0 0.5rem 1rem rgba(0, 0, 0, 0.1)",border:"3px solid var(--border-color)",display:"flex",gap:"4rem"}}).showToast()}const Ye={SessionExpired:1001};async function Z(r){r.data.status_code===Ye.SessionExpired&&(se.current={token:null},Ve("Session expired, please login again"),He(`${Ce()}/login`))}function ze(){const r=Re.create({});return r.interceptors.response.use(e=>(Z(e),e),e=>(Z(e.response),Promise.reject(e))),r}function I(){var r;return{Authorization:`Bearer ${(r=se.current)==null?void 0:r.token}`}}class Ge{constructor(){this.axios=ze()}async login(e,a){try{const s=new FormData;return s.append("username",e),s.append("password",a),[(await this.axios.post(`${S()}/auth/login`,s)).data.data,null]}catch(s){return[null,s]}}async logout(){try{return await this.axios.post(`${S()}/auth/logout`,null,{headers:{...I()}}),null}catch(e){return e}}async revokeSession(e){try{const a=new FormData;return a.append("session_id",e.toString()),await this.axios.post(`${S()}/auth/revoke-session`,a,{headers:{...I()}}),null}catch(a){return a}}async getActiveSessions(){try{return[(await this.axios.get(`${S()}/auth/sessions`,{headers:{...I()}})).data.data,null]}catch(e){return[null,e]}}async updateUser(e){try{const a=new FormData;return a.append("display_name",e),[(await this.axios.put(`${S()}/user`,a,{headers:{...I()}})).data.data,null]}catch(a){return[null,a]}}async getAllUsers(){try{return[(await this.axios.get(`${S()}/user`,{headers:{...I()}})).data.data,null]}catch(e){return[null,e]}}async createUser(e,a,s,n){try{const i=new FormData;return i.append("username",e),i.append("password",a),i.append("display_name",s),i.append("is_admin",n.toString()),[(await this.axios.post(`${S()}/user`,i,{headers:{...I()}})).data.data,null]}catch(i){return[null,i]}}}const nr=new Ge;export{rr as a,er as b,ze as c,je as e,I as g,Ze as i,sr as r,W as s,ar as t,nr as u};
